<script lang="ts">
    const { color = 'currentColor', x = 0, y = 0 }: { color: string; x: number; y: number } = $props();

    let prevX = 0;
    let prevY = 0;

    const angle = $derived(Math.atan2(y - prevY, x - prevX));

    $effect(() => {
        prevX = x;
        prevY = y;
    });
</script>

<svg
    version="1.1"
    xmlns="http://www.w3.org/2000/svg"
    width="64"
    height="64"
    viewBox="0 0 64 64"
    style:left={x}
    style:top={y}
    style:transform={`rotate(${angle - Math.PI / 2}rad)`}
    class="hedgehog"
>
    <path
        stroke={color}
        d="M32.2,0c1.4,0.5,2.6,3.7,3.2,4.9c4.5-3.4,5.1-5.4,6.6,1.2c2,0,4-2.9,5.3-2.4C48.5,4,47.7,9,47.7,9.8
		c5.7-2.2,7.4-2.5,5.3,4.5c5.9-0.3,8.2-1,4.3,5.2c6.1,1.1,6.8,1.6,2,6.1c6,3.8,6,1.2,0.5,6.9c6.5,4.7,4.9,4.3-1.1,6.7
		c0.6,0.7,4.7,3.9,4.1,4.6c-1.9,1.9-5.3,0.6-7.8,2.1c-2.1,1.3-3.6,4.7-5.8,6.3c-3.2,2.4-8.1,2.8-10.9,4.9c-3.2,2.4-3.2,10.3-9.8,5.2
		c-1.3-0.9-0.9-3-1.8-3.8c-2.1-1.8-4.3-2.2-7.2-3.6c-3.4-1.7-5.5-4.6-8.4-6.7c-0.7-0.9-1.4-1.8-2.2-2.8c-1.6-0.1-5.5-0.1-7.3-0.8
		c-0.5-0.2,1.1-1.8,3.9-5.5c-6.4-2-6.8-2.7-1.1-6.7c-5.5-3.8-6.1-4.4,0.5-6.7c-5.3-6.1-3.8-4.3,2-6.3c-3.6-5.7-2-5.1,4.3-5.2
		c-1.8-5.9-0.9-7.4,5.3-4.5c0-0.8-0.9-5.6,0-5.7c2.3-0.1,3.6,2.2,5.8,2c1.5-6.9,2.3-4.2,6.6-1.2C29.3,3.7,30.5,0,32.2,0z"
    />
    <path
        fill={color}
        opacity="0.4"
        d="M32.2,0c1.4,0.5,2.6,3.7,3.2,4.9c4.5-3.4,5.1-5.4,6.6,1.2c2,0,4-2.9,5.3-2.4C48.5,4,47.7,9,47.7,9.8
		c5.7-2.2,7.4-2.5,5.3,4.5c5.9-0.3,8.2-1,4.3,5.2c6.1,1.1,6.8,1.6,2,6.1c6,3.8,6,1.2,0.5,6.9c6.5,4.7,4.9,4.3-1.1,6.7
		c0.6,0.7,4.7,3.9,4.1,4.6c-1.9,1.9-5.3,0.6-7.8,2.1c-2.1,1.3-3.6,4.7-5.8,6.3c-3.2,2.4-8.1,2.8-10.9,4.9c-3.2,2.4-3.2,10.3-9.8,5.2
		c-1.3-0.9-0.9-3-1.8-3.8c-2.1-1.8-4.3-2.2-7.2-3.6c-3.4-1.7-5.5-4.6-8.4-6.7c-0.7-0.9-1.4-1.8-2.2-2.8c-1.6-0.1-5.5-0.1-7.3-0.8
		c-0.5-0.2,1.1-1.8,3.9-5.5c-6.4-2-6.8-2.7-1.1-6.7c-5.5-3.8-6.1-4.4,0.5-6.7c-5.3-6.1-3.8-4.3,2-6.3c-3.6-5.7-2-5.1,4.3-5.2
		c-1.8-5.9-0.9-7.4,5.3-4.5c0-0.8-0.9-5.6,0-5.7c2.3-0.1,3.6,2.2,5.8,2c1.5-6.9,2.3-4.2,6.6-1.2C29.3,3.7,30.5,0,32.2,0z"
    />
    <path
        fill="white"
        d="M18.2,34c-4.4,4.9-0.9,12.9,5.9,13.1c3.8,0.1,5.5-2.2,8.5-2c4.3,0.3,5.3,3.8,10.3,0.3c6.8-4.7,2-15.4-6.3-13.8
		c-3.4,0.6-3.8,2.1-6.8,1.8C25.3,32.9,22.4,29.7,18.2,34z"
    />
    <path
        d="M27.2,37c0.5,0.3,0.8,0.5,1,1.1c0.1,0.5,0.1,0.8-0.2,1.3c-0.4,0.5-0.6,0.7-1.2,0.8c-0.7,0-1.1-0.2-1.6-0.6
		c-0.3-0.5-0.3-0.9-0.3-1.5c0.1-0.5,0.4-0.8,0.9-1.1C26.1,36.9,26.6,36.8,27.2,37z"
    />
    <path
        d="M38.3,36.9c0.4,0.2,0.6,0.4,0.9,0.7c0.1,0.5,0.1,1,0,1.6c-0.3,0.5-0.6,0.7-1.1,0.9c-0.6,0.1-0.9,0-1.4-0.3
		c-0.5-0.4-0.6-0.8-0.7-1.5c0.1-0.5,0.2-0.7,0.5-1.1C37,36.8,37.6,36.6,38.3,36.9z"
    />
    <path
        fill="white"
        opacity="0.8"
        d="M31.2,47.4c-5.7,4.9-5.3,2.9-3,11.1c2.9,0,4.3-2,7.2,0.2c0.3-0.9,2.2-5.8,2-6.9C37.2,50.9,32.8,46,31.2,47.4z"
    />
</svg>

<style>
    .hedgehog {
        position: absolute;
    }
</style>
